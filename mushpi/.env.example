# =============================================================================
# MushPi Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your deployment
# 
# Quick setup:
#   cp .env.example .env
#   nano .env  # Edit paths and settings as needed
#
# =============================================================================

# -----------------------------------------------------------------------------
# System Paths
# -----------------------------------------------------------------------------
# Base application directory (where main.py and app/ are located)
# For Raspberry Pi: /home/pi/mushpi
# For production: /opt/mushpi/app
MUSHPI_APP_DIR=/home/pi/mushpi

# Data directory (for database, logs, etc.)
# For Raspberry Pi: /home/pi/mushpi/data
# For production: /opt/mushpi/data
MUSHPI_DATA_DIR=/home/pi/mushpi/data

# Configuration directory (for thresholds.json, etc.)
# For Raspberry Pi: /home/pi/mushpi/app/config
# For production: /opt/mushpi/app/config
MUSHPI_CONFIG_DIR=/home/pi/mushpi/app/config

# Python virtual environment path
# For Raspberry Pi: /home/pi/mushpi/venv
# For production: /opt/mushpi/venv
MUSHPI_VENV_PATH=/home/pi/mushpi/venv

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# SQLite database path (can be relative to DATA_DIR or absolute)
MUSHPI_DB_PATH=data/sensors.db

# Database connection timeout (seconds)
MUSHPI_DB_TIMEOUT=30

# -----------------------------------------------------------------------------
# GPIO Pin Configuration (BCM numbering)
# -----------------------------------------------------------------------------
# DHT22 Temperature/Humidity sensor data pin
# Default: GPIO 4 (Physical Pin 7) - REQUIRES 10kΩ pull-up resistor to 3.3V
MUSHPI_DHT22_PIN=4

# Relay control pins (BCM GPIO numbering)
# Fan exhaust relay (for CO2 reduction and temperature control)
MUSHPI_RELAY_FAN=17

# Mist/Humidifier relay (for humidity control)
MUSHPI_RELAY_MIST=27

# Grow light relay
MUSHPI_RELAY_LIGHT=22

# Heater relay (optional, for temperature control in cold environments)
MUSHPI_RELAY_HEATER=23

# -----------------------------------------------------------------------------
# I2C Device Configuration
# -----------------------------------------------------------------------------
# SCD41 CO2/Temperature/Humidity sensor I2C address (hex)
MUSHPI_SCD41_ADDRESS=0x62

# ADS1115 ADC I2C address (hex) - used for light sensor
MUSHPI_ADS1115_ADDRESS=0x48

# ADS1115 channel for light sensor (0-3, default A0)
MUSHPI_LIGHT_SENSOR_CHANNEL=0

# -----------------------------------------------------------------------------
# Sensor Timing (seconds)
# -----------------------------------------------------------------------------
# How often to read from SCD41 sensor (minimum 5 seconds due to sensor limitations)
MUSHPI_SCD41_INTERVAL=5.0

# How often to read from DHT22 sensor (minimum 2 seconds recommended)
MUSHPI_DHT22_INTERVAL=2.0

# How often to read light sensor
MUSHPI_LIGHT_INTERVAL=1.0

# Main monitoring loop interval
MUSHPI_MONITOR_INTERVAL=30.0

# -----------------------------------------------------------------------------
# Hardware Calibration
# -----------------------------------------------------------------------------
# Light sensor circuit configuration (photoresistor voltage divider)
# Fixed resistor value in ohms (typically 10kΩ)
MUSHPI_LIGHT_FIXED_RESISTOR=10000

# Supply voltage for voltage divider (typically 3.3V on Raspberry Pi)
MUSHPI_LIGHT_VCC=3.3

# Minimum photoresistor resistance (ohms, at maximum light)
MUSHPI_LIGHT_MIN_RESISTANCE=1000

# Maximum photoresistor resistance (ohms, at minimum light/darkness)
MUSHPI_LIGHT_MAX_RESISTANCE=100000

# -----------------------------------------------------------------------------
# Control System Configuration
# -----------------------------------------------------------------------------
# Relay logic level
# true = Active HIGH (GPIO HIGH turns relay ON)
# false = Active LOW (GPIO LOW turns relay ON) - MOST COMMON for relay modules
MUSHPI_RELAY_ACTIVE_HIGH=false

# Hysteresis values (prevent rapid relay cycling)
# Temperature hysteresis (°C) - relay won't switch until this far past threshold
MUSHPI_TEMP_HYSTERESIS=1.0

# Humidity hysteresis (%) - prevents mist relay from rapid cycling
MUSHPI_HUMIDITY_HYSTERESIS=3.0

# CO2 hysteresis (ppm) - prevents fan from rapid cycling
MUSHPI_CO2_HYSTERESIS=100.0

# Light verification thresholds
# Raw ADC value threshold to consider light as "ON"
MUSHPI_LIGHT_ON_THRESHOLD=200.0

# Raw ADC value threshold to consider light as "OFF"
MUSHPI_LIGHT_OFF_THRESHOLD=50.0

# Delay (seconds) after light state change before verification
MUSHPI_LIGHT_VERIFICATION_DELAY=30.0

# -----------------------------------------------------------------------------
# Bluetooth Configuration
# -----------------------------------------------------------------------------
# BLE GATT Service UUID (custom service for environmental control)
MUSHPI_BLE_SERVICE_UUID=12345678-1234-5678-1234-56789abcdef0

# BLE advertising name prefix (will append species+stage, e.g., "MushPi-OysterPinning")
MUSHPI_BLE_NAME_PREFIX=MushPi

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
MUSHPI_LOG_LEVEL=INFO

# Log file path (leave empty for console-only logging)
# Example: /home/pi/mushpi/logs/mushpi.log
MUSHPI_LOG_FILE=

# Maximum log file size in MB before rotation
MUSHPI_LOG_MAX_SIZE=10

# Number of rotated log files to keep
MUSHPI_LOG_BACKUP_COUNT=5

# -----------------------------------------------------------------------------
# Development & Testing Modes
# -----------------------------------------------------------------------------
# Simulation mode: Simulates GPIO and sensors (for testing without hardware)
# Set to true for development on non-Pi systems, false for production on Pi
MUSHPI_SIMULATION_MODE=false

# Debug mode: Enable verbose debug logging
MUSHPI_DEBUG_MODE=false

# Test mode: Enable test-specific behaviors
MUSHPI_TEST_MODE=false

# -----------------------------------------------------------------------------
# Configuration Files
# -----------------------------------------------------------------------------
# Path to thresholds.json (can be relative to APP_DIR or absolute)
MUSHPI_THRESHOLDS_PATH=config/thresholds.json

# -----------------------------------------------------------------------------
# Stage Management Configuration
# -----------------------------------------------------------------------------
# Path to stage configuration JSON file (can be relative to APP_DIR or absolute)
# This file stores the current cultivation stage, species, and mode
MUSHPI_STAGE_CONFIG_PATH=data/stage_config.json

# Default species for initial stage configuration
# Supported: Oyster, Shiitake, Lion's Mane, etc. (must match thresholds.json)
MUSHPI_STAGE_DEFAULT_SPECIES=Oyster

# Default cultivation stage for initial configuration
# Supported: Incubation, Pinning, Fruiting, Harvest (must match thresholds.json)
MUSHPI_STAGE_DEFAULT_STAGE=Pinning

# Default automation mode for stage management
# Options:
#   full   - Automatic environmental control + automatic stage progression
#   semi   - Automatic environmental control, manual stage progression (recommended)
#   manual - Manual control only, no automation
MUSHPI_STAGE_DEFAULT_MODE=semi

# Default expected duration (in days) for a cultivation stage
# This is used when creating a new stage configuration
# Typical values: Incubation (14-21), Pinning (5-7), Fruiting (7-10), Harvest (3-5)
MUSHPI_STAGE_DEFAULT_DAYS=5

# =============================================================================
# GPIO Pin Reference (BCM Numbering)
# =============================================================================
# BCM GPIO | Physical Pin | Default Use
# ---------|--------------|----------------------------------
# GPIO 4   | Pin 7        | DHT22 Temperature/Humidity sensor
# GPIO 17  | Pin 11       | Fan exhaust relay
# GPIO 27  | Pin 13       | Mist/Humidifier relay
# GPIO 22  | Pin 15       | Grow light relay
# GPIO 23  | Pin 16       | Heater relay
# I2C SDA  | Pin 3        | SCD41 + ADS1115 (I2C Data)
# I2C SCL  | Pin 5        | SCD41 + ADS1115 (I2C Clock)
#
# Note: Enable I2C via `sudo raspi-config` → Interface Options → I2C
#
# =============================================================================
# Deployment Scenarios
# =============================================================================
#
# RASPBERRY PI DEVELOPMENT (in home directory):
# - MUSHPI_APP_DIR=/home/pi/mushpi
# - MUSHPI_DATA_DIR=/home/pi/mushpi/data
# - MUSHPI_CONFIG_DIR=/home/pi/mushpi/app/config
# - MUSHPI_VENV_PATH=/home/pi/mushpi/venv
# - MUSHPI_STAGE_CONFIG_PATH=data/stage_config.json
# - MUSHPI_SIMULATION_MODE=false
# - Run with: python3 main.py (no sudo needed)
#
# PRODUCTION DEPLOYMENT (system-wide):
# - MUSHPI_APP_DIR=/opt/mushpi/app
# - MUSHPI_DATA_DIR=/opt/mushpi/data
# - MUSHPI_CONFIG_DIR=/opt/mushpi/app/config
# - MUSHPI_VENV_PATH=/opt/mushpi/venv
# - MUSHPI_STAGE_CONFIG_PATH=data/stage_config.json
# - MUSHPI_STAGE_DEFAULT_SPECIES=Oyster  # or Shiitake, Lion's Mane, etc.
# - MUSHPI_STAGE_DEFAULT_MODE=semi
# - MUSHPI_SIMULATION_MODE=false
# - Run with: sudo systemctl start mushpi (as service)
# - Set ownership: sudo chown -R pi:pi /opt/mushpi
#
# LOCAL DEVELOPMENT (Mac/Linux/Windows):
# - MUSHPI_APP_DIR=/Users/yourname/dev/mushpi
# - MUSHPI_DATA_DIR=/Users/yourname/dev/mushpi/data
# - MUSHPI_CONFIG_DIR=/Users/yourname/dev/mushpi/app/config
# - MUSHPI_STAGE_CONFIG_PATH=data/stage_config.json
# - MUSHPI_STAGE_DEFAULT_SPECIES=Oyster
# - MUSHPI_STAGE_DEFAULT_MODE=manual  # Use manual mode for development/testing
# - MUSHPI_SIMULATION_MODE=true
# - MUSHPI_DEBUG_MODE=true
# - Run with: python3 main.py (GPIO operations will be simulated)
#
# =============================================================================
# Required Python Packages (Raspberry Pi)
# =============================================================================
# Install in your virtual environment or globally:
#
#   pip3 install adafruit-blinka
#   pip3 install adafruit-circuitpython-ads1x15
#   pip3 install adafruit-circuitpython-scd4x
#   pip3 install adafruit-circuitpython-dht
#
# System packages (Raspberry Pi OS):
#   sudo apt install -y i2c-tools libgpiod2 python3-dev
#
# Enable I2C:
#   sudo raspi-config → Interface Options → I2C → Enable
#
# Verify I2C devices:
#   i2cdetect -y 1
#   (Should show 0x48 for ADS1115 and 0x62 for SCD41)
#
# =============================================================================
# Security Notes
# =============================================================================
# - Do NOT commit .env to version control (already in .gitignore)
# - Do NOT store API keys, tokens, or passwords in this file
# - For production: use environment variables or secrets management
# - The .env file is for local configuration only
#
# =============================================================================
