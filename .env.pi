# MushPi Environment Configuration for Raspberry Pi
# Copy this file to /home/pi/mushpi/.env on the Raspberry Pi

# =============================================================================
# PATH CONFIGURATION
# =============================================================================
# Application directory (where the code is installed)
MUSHPI_APP_DIR=/home/pi/mushpi/app

# Data directory (for runtime data and databases)
MUSHPI_DATA_DIR=/home/pi/mushpi/data

# Config directory (for configuration files)
MUSHPI_CONFIG_DIR=/home/pi/mushpi/app/config

# Python virtual environment path
MUSHPI_VENV_PATH=/home/pi/mushpi/.venv

# =============================================================================
# STAGE CONFIGURATION
# =============================================================================
# Path to stage configuration file (relative to APP_DIR or absolute)
MUSHPI_STAGE_CONFIG_PATH=data/stage_config.json

# Default stage settings
MUSHPI_STAGE_DEFAULT_SPECIES=Oyster
MUSHPI_STAGE_DEFAULT_STAGE=Pinning
MUSHPI_STAGE_DEFAULT_MODE=semi
MUSHPI_STAGE_DEFAULT_DAYS=5

# Thresholds configuration path (relative to APP_DIR or absolute)
MUSHPI_THRESHOLDS_PATH=config/thresholds.json

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
MUSHPI_DB_PATH=data/sensors.db
MUSHPI_DB_TIMEOUT=30

# =============================================================================
# GPIO CONFIGURATION
# =============================================================================
MUSHPI_DHT22_PIN=4
MUSHPI_RELAY_FAN=17
MUSHPI_RELAY_MIST=27
MUSHPI_RELAY_LIGHT=22
MUSHPI_RELAY_HEATER=23

# Relay active level (false for most relay boards that use active-LOW logic)
MUSHPI_RELAY_ACTIVE_HIGH=false

# =============================================================================
# I2C CONFIGURATION
# =============================================================================
MUSHPI_SCD41_ADDRESS=0x62
MUSHPI_ADS1115_ADDRESS=0x48
MUSHPI_LIGHT_SENSOR_CHANNEL=0

# =============================================================================
# SENSOR TIMING CONFIGURATION
# =============================================================================
# SCD41 minimum reading interval (seconds)
MUSHPI_SCD41_INTERVAL=5.0

# DHT22 minimum reading interval (seconds)
MUSHPI_DHT22_INTERVAL=2.0

# Light sensor minimum reading interval (seconds)
MUSHPI_LIGHT_INTERVAL=1.0

# Sensor monitoring loop interval (seconds)
MUSHPI_MONITOR_INTERVAL=30.0

# =============================================================================
# HARDWARE CALIBRATION
# =============================================================================
# Light sensor voltage divider fixed resistor value (ohms)
MUSHPI_LIGHT_FIXED_RESISTOR=10000

# Supply voltage for light sensor (volts)
MUSHPI_LIGHT_VCC=3.3

# Light sensor minimum resistance for max brightness (ohms)
MUSHPI_LIGHT_MIN_RESISTANCE=1000

# Light sensor maximum resistance for darkness (ohms)
MUSHPI_LIGHT_MAX_RESISTANCE=100000

# =============================================================================
# CONTROL TIMING CONFIGURATION
# =============================================================================
# Hysteresis defaults for threshold control
MUSHPI_TEMP_HYSTERESIS=1.0
MUSHPI_HUMIDITY_HYSTERESIS=3.0
MUSHPI_CO2_HYSTERESIS=100.0

# Light verification thresholds
MUSHPI_LIGHT_ON_THRESHOLD=200.0
MUSHPI_LIGHT_OFF_THRESHOLD=50.0
MUSHPI_LIGHT_VERIFICATION_DELAY=30.0

# =============================================================================
# BLUETOOTH CONFIGURATION
# =============================================================================
# Backend implementation: bluezero (legacy) | bluez-dbus (new dbus-next backend)
MUSHPI_BLE_BACKEND=bluezero

# HCI adapter device name
MUSHPI_BLE_ADAPTER=hci0

# Root D-Bus path under which GATT objects are exported (dbus-next backend only)
MUSHPI_DBUS_APP_PATH=/com/mushpi/gatt

# Enable minimal GATT (status + environmental characteristics)
MUSHPI_BLE_GATT_MINIMAL_ENABLE=false

# Timeouts (milliseconds)
MUSHPI_DBUS_BUS_TIMEOUT_MS=2500
MUSHPI_BLE_SHUTDOWN_TIMEOUT_MS=1500

# Notification queue & backpressure
MUSHPI_BLE_QUEUE_MAX_SIZE=64
MUSHPI_BLE_QUEUE_PUT_TIMEOUT_MS=10
MUSHPI_BLE_BACKPRESSURE_POLICY=drop_oldest
MUSHPI_BLE_LOG_SLOW_PUBLISH_MS=250

# Future publish retry/backoff (reserved)
MUSHPI_BLE_PUBLISH_TIMEOUT_MS=2000
MUSHPI_BLE_PUBLISH_MAX_RETRIES=2
MUSHPI_BLE_PUBLISH_BACKOFF_BASE_MS=100

# Advertising
MUSHPI_BLE_ADV_ENABLE=true
MUSHPI_BLE_ADV_TX_POWER=med

# GATT Service UUID and device name
MUSHPI_BLE_SERVICE_UUID=12345678-1234-5678-1234-56789abcdef0
MUSHPI_BLE_NAME_PREFIX=MushPi

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
MUSHPI_LOG_LEVEL=INFO
MUSHPI_LOG_FILE=
MUSHPI_LOG_MAX_SIZE=10
MUSHPI_LOG_BACKUP_COUNT=5

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
MUSHPI_SIMULATION_MODE=false
MUSHPI_DEBUG_MODE=false
MUSHPI_TEST_MODE=false
