# MushPi Environment Configuration
# Copy this file to .env and customize the values for your setup

#=============================================================================
# SYSTEM PATHS
#=============================================================================

# Base application directory (where main.py is located)
MUSHPI_APP_DIR=/opt/mushpi/app

# Data directory for database and logs
MUSHPI_DATA_DIR=/opt/mushpi/data

# Configuration directory for JSON files
MUSHPI_CONFIG_DIR=/opt/mushpi/app/config

# Python virtual environment path
MUSHPI_VENV_PATH=/opt/mushpi/.venv

#=============================================================================
# DATABASE CONFIGURATION
#=============================================================================

# SQLite database file path
MUSHPI_DB_PATH=data/sensors.db

# Database connection timeout (seconds)
MUSHPI_DB_TIMEOUT=30

#=============================================================================
# THRESHOLD CONFIGURATION
#=============================================================================

# Thresholds JSON configuration file path
MUSHPI_THRESHOLDS_PATH=config/thresholds.json

#=============================================================================
# GPIO CONFIGURATION
#=============================================================================

# DHT22 Temperature/Humidity sensor GPIO pin (BCM numbering)
MUSHPI_DHT22_PIN=4

# Relay control GPIO pins (BCM numbering)
MUSHPI_RELAY_FAN=17
MUSHPI_RELAY_MIST=27
MUSHPI_RELAY_LIGHT=22
MUSHPI_RELAY_HEATER=23

#=============================================================================
# I2C CONFIGURATION
#=============================================================================

# SCD41 CO2/Temperature/Humidity sensor I2C address (hexadecimal)
MUSHPI_SCD41_ADDRESS=0x62

# ADS1115 ADC I2C address for light sensor (hexadecimal)  
MUSHPI_ADS1115_ADDRESS=0x48

# ADS1115 channel for photoresistor (0-3)
MUSHPI_LIGHT_SENSOR_CHANNEL=0

#=============================================================================
# SENSOR TIMING CONFIGURATION
#=============================================================================

# SCD41 minimum reading interval (seconds)
MUSHPI_SCD41_INTERVAL=5.0

# DHT22 minimum reading interval (seconds)
MUSHPI_DHT22_INTERVAL=2.0

# Light sensor minimum reading interval (seconds)
MUSHPI_LIGHT_INTERVAL=1.0

# Sensor monitoring loop interval (seconds)
MUSHPI_MONITOR_INTERVAL=30.0

#=============================================================================
# HARDWARE CALIBRATION
#=============================================================================

# Light sensor voltage divider fixed resistor value (ohms)
MUSHPI_LIGHT_FIXED_RESISTOR=10000

# Supply voltage for light sensor (volts)
MUSHPI_LIGHT_VCC=3.3

# Light sensor minimum resistance for max brightness (ohms)
MUSHPI_LIGHT_MIN_RESISTANCE=1000

# Light sensor maximum resistance for darkness (ohms)
MUSHPI_LIGHT_MAX_RESISTANCE=100000

#=============================================================================
# CONTROL SYSTEM CONFIGURATION
#=============================================================================

# Relay active state (true for active HIGH, false for active LOW)
MUSHPI_RELAY_ACTIVE_HIGH=false

# Hysteresis defaults for threshold control
MUSHPI_TEMP_HYSTERESIS=1.0
MUSHPI_HUMIDITY_HYSTERESIS=3.0
MUSHPI_CO2_HYSTERESIS=100.0

#=============================================================================
# BLUETOOTH CONFIGURATION
#=============================================================================

## Core backend selection and adapter
# Backend implementation: bluezero (legacy) | bluez-dbus (new dbus-next backend)
MUSHPI_BLE_BACKEND=bluezero

# HCI adapter device name
MUSHPI_BLE_ADAPTER=hci0

## GATT application & minimal mode gate
# Root D-Bus path under which GATT objects are exported (dbus-next backend only)
MUSHPI_DBUS_APP_PATH=/com/mushpi/gatt

# Enable minimal GATT (status + environmental characteristics) for incremental rollout
MUSHPI_BLE_GATT_MINIMAL_ENABLE=false

## Timeouts (milliseconds)
# D-Bus bus connection timeout
MUSHPI_DBUS_BUS_TIMEOUT_MS=2500
# Graceful shutdown timeout for backend loop
MUSHPI_BLE_SHUTDOWN_TIMEOUT_MS=1500

## Notification queue & backpressure
# Max queued notifications (integer > 0)
MUSHPI_BLE_QUEUE_MAX_SIZE=64
# Put timeout when enqueueing (ms)
MUSHPI_BLE_QUEUE_PUT_TIMEOUT_MS=10
# Backpressure policy: drop_oldest | drop_newest | coalesce
MUSHPI_BLE_BACKPRESSURE_POLICY=drop_oldest
# Log threshold for slow publish (ms)
MUSHPI_BLE_LOG_SLOW_PUBLISH_MS=250

## Future publish retry/backoff (reserved; not yet active)
MUSHPI_BLE_PUBLISH_TIMEOUT_MS=2000
MUSHPI_BLE_PUBLISH_MAX_RETRIES=2
MUSHPI_BLE_PUBLISH_BACKOFF_BASE_MS=100

## Advertising (planned features; may be ignored if not implemented yet)
MUSHPI_BLE_ADV_ENABLE=true
# TX power preference: low | med | high (placeholder until active)
MUSHPI_BLE_ADV_TX_POWER=med

## Identification (keep stable once deployed)
# GATT primary service UUID (do not change after clients are built/paired)
MUSHPI_BLE_SERVICE_UUID=12345678-1234-5678-1234-56789abcdef0
# Advertising/device name prefix
MUSHPI_BLE_NAME_PREFIX=MushPi

#=============================================================================
# LOGGING CONFIGURATION
#=============================================================================

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
MUSHPI_LOG_LEVEL=INFO

# Log file path (empty for console only)
MUSHPI_LOG_FILE=

# Maximum log file size in MB
MUSHPI_LOG_MAX_SIZE=10

# Number of log files to keep
MUSHPI_LOG_BACKUP_COUNT=5

#=============================================================================
# DEVELOPMENT/TESTING
#=============================================================================

# Enable simulation mode when GPIO libraries not available
MUSHPI_SIMULATION_MODE=false

# Enable debug mode with verbose logging
MUSHPI_DEBUG_MODE=false

# Test mode - skip hardware initialization
MUSHPI_TEST_MODE=false

MUSHPI_THINGSPEAK_ENABLED=true
#
# ThingSpeak authentication
MUSHPI_THINGSPEAK_API_KEY=KGL639X2OP15IV5X
MUSHPI_THINGSPEAK_CHANNEL_ID=3178576
#
# ThingSpeak endpoint (usually does not need to change)
MUSHPI_THINGSPEAK_UPDATE_URL=https://api.thingspeak.com/update
#
# Field mappings (configure to match your ThingSpeak channel field names)
# For example, if your channel uses field1 for temperature, field2 for humidity, etc.:
MUSHPI_THINGSPEAK_FIELD_TEMPERATURE=field1
MUSHPI_THINGSPEAK_FIELD_HUMIDITY=field2
MUSHPI_THINGSPEAK_FIELD_CO2=field3
MUSHPI_THINGSPEAK_FIELD_LIGHT=field4
#
# Minimum interval (seconds) between ThingSpeak publishes.
# Default is 300 seconds (5 minutes) when not set.
MUSHPI_THINGSPEAK_MIN_INTERVAL=30
#
# Network timeout (seconds) for ThingSpeak HTTP requests.
MUSHPI_THINGSPEAK_TIMEOUT=5

